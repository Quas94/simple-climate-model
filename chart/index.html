<!-- Popup for expanding charts, and in case of custom scenario input charts, editing them -->
<html>
<head>
	<!-- Title omitted because it is set by opener's js script -->
	<title>Chart</title>

	<!-- Google font (Raleway) -->
	<link href='https://fonts.googleapis.com/css?family=Raleway' rel='stylesheet' type='text/css'>
	<!-- jQuery -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<!-- Bootstrap CSS -->
	<link rel="stylesheet" type="text/css" href=".././css/bootstrap.min.css">
	<!-- Bootstrap's default js, otherwise dropdowns don't work -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
	<!-- Chartist.js minified CSS file -->
	<link rel="stylesheet" type="text/css" href=".././css/chartist.min.css">
	<!-- Chartist.js minified js library -->
	<script type="text/javascript" src=".././js/chartist.min.js"></script>
	<!-- Chartist.js plugins -->
	<script src=".././js/chartist-plugin-axistitle.min.js"></script>
	<!-- Chart plotting functions -->
	<script type="text/javascript" src=".././js/app/charting.js"></script>
	<!-- Our custom CSS files -->
	<link rel="stylesheet" type="text/css" href=".././css/app.css">
</head>
<body>
	<div class="panel panel-default no-border">
		<div class="panel-heading" id="panel-title">Chart</div>
		<div class="panel-body no-padding-bottom">
			<div id="legend-box-output">
				<div><p><span id="popupLegend_red" style="color: red; visibility: hidden"><i class="glyphicon glyphicon-stop"></i> <span id="popupLegend_redValue"></span></span></p></div>
				<div><p><span id="popupLegend_blue" style="color: blue; visibility: hidden"><i class="glyphicon glyphicon-stop"></i> <span id="popupLegend_blueValue"></span></span></p></div>
				<div><p><span id="popupLegend_green" style="color: green; visibility: hidden"><i class="glyphicon glyphicon-stop"></i> <span id="popupLegend_greenValue"></span></span></p></div>
				<div><p><span id="popupLegend_orange" style="color: orange; visibility: hidden"><i class="glyphicon glyphicon-stop"></i> <span id="popupLegend_orangeValue"></span></span></p></div>
				<div><p><span id="popupLegend_black" style="color: black; visibility: hidden"><i class="glyphicon glyphicon-stop"></i> <span id="popupLegend_blackValue"></span></span></p></div>
			</div>
			<div class="ct-chart" id="popupChart"></div>
		</div>
	</div>

	<script type="text/javascript">
		// grab the data from the opener window and plot it
		var data = window.opener.document.popupData;

		// set title and panel title
		document.title = data.title;
		document.getElementById('panel-title').innerHTML = data.title;

		var id = 'popupChart';
		var yAxisTitle = data.yAxisTitle;

		var legend = data.legend;
		if (typeof legend !== 'undefined' && legend !== null) {
			for (var colour in legend) {
				if (legend.hasOwnProperty(colour)) {
					document.getElementById('popupLegend_' + colour).style.visibility = 'visible';
					document.getElementById('popupLegend_' + colour + 'Value').innerHTML = legend[colour];
				}
			}
		}

		plotData(id, data.years, data.data, true, yAxisTitle);

	</script>
</body>
</html>
